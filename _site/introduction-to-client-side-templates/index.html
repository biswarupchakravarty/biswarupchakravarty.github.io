<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a blog page with a list of posts.">

    <title>Introduction To Client Side Templates</title>

    <!-- <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/pure.css">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/grids-responsive.css">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/typography.css">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/syntax.css">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/blog.css">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/styles.css"> -->

    <link rel="stylesheet" type="text/css" href="/assets/stylesheets/common/common_all.css">    
  </head>

  <body>
    <div id="layout" class="pure-g">
      <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
          <h1 class="brand-title">The Shiny Coin</h1>
          <h2 class="brand-tagline">A blog about the modern web.</h2>

          <nav class="nav">
            <ul class="nav-list">
              <li class="nav-item">
                
                  <a class="pure-button" href="/">&larr; Back Home</a>
                
              </li>
              <!-- <li class="nav-item">
                <a class="pure-button" href="http://yuilibrary.com">YUI Library</a>
              </li> -->
            </ul>
          </nav>
        </div>
      </div>

      <div class="content  pure-u-1 pure-u-md-3-4">
        <article class="post">
  <header class="post-header">
    <!-- <img class="post-avatar" alt="Biswarup Chakravarty&#x27;s avatar" height="48" width="48" data-email="biswarup.chakravarty@gmail.com"> -->
    <h1 class="post-title"><a href="/introduction-to-client-side-templates" class="post-title-link">Introduction To Client Side Templates</a></h1>
    <p class="post-meta">
      By <a href="" class="post-author">Biswarup Chakravarty</a> on <time datetime="">17 March 2015</time>
      under 
        <a class="post-tag post-tag-index-1" href="#">JavaScript</a>
      
        <a class="post-tag post-tag-index-2" href="#">Webapps</a>
      
        <a class="post-tag post-tag-index-3" href="#">Templating</a>
      
   </p>
   <div class="social-buttons-container">
  <ul class="social-buttons cf">
    <li>
      <a href="http://twitter.com/share" class="socialite twitter-share" data-text="Socialite.js" data-url="/introduction-to-client-side-templates" rel="nofollow" target="_blank"><span class="vhidden"><!-- Share on Twitter --></span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/introduction-to-client-side-templates" class="socialite googleplus-one" data-href="/introduction-to-client-side-templates" rel="nofollow" target="_blank"><span class="vhidden"><!-- Share on Google --></span></a>
    </li>
    <li>
      <a href="http://www.facebook.com/sharer.php?u=http://www.socialitejs.com&amp;t=Socialite.js" class="socialite facebook-like" data-href="/introduction-to-client-side-templates" data-send="false" data-layout="button_count" data-width="60" data-show-faces="false" rel="nofollow" target="_blank"><span class="vhidden"><!-- Share on Facebook --></span></a>
    </li>
    <li></li>
    <!-- <li>
    <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=/introduction-to-client-side-templates&amp;title=Socialite.js" class="socialite linkedin-share" data-url="/introduction-to-client-side-templates" data-counter="top" rel="nofollow" target="_blank"><span class="vhidden">Share on LinkedIn</span></a>
    </li>
    <li>
    <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=/introduction-to-client-side-templates&amp;title=Socialite.js" class="socialite linkedin-share" data-url="/introduction-to-client-side-templates" data-counter="top" rel="nofollow" target="_blank"><span class="vhidden">Share on LinkedIn</span></a>
    </li> -->
  </ul>
</div>
   <hr>
 </header>
 <section class="post-description">
  <p>This post is hopefully going to answer the following questions:</p>

<ul>
  <li>When should I use client side templating?</li>
  <li>What are the basic types of client side templating engines?</li>
  <li>What are the features that I should be on the lookout for when picking out a templating engine?</li>
</ul>

<p><small>Why? Because I recently saw the most god-awful template written by a friend of mine. And when I quizzed him on the abomination, his answers scared me.</small></p>

<!--more-->

<h2 id="why-client-side-templating">Why Client-Side Templating</h2>

<p>Web applications are getting more and more structured (and complicated) now-a-days, with most applications enforcing a separation between the data and the presentation layer. Simply rendering a JSP/ASPX/ERB on the server and spitting it out is no longer going to cut it. Each screen in a modern webapp is generally comprised of many different sections, with each section representing different data (aka views).</p>

<p>There are many reasons to use client side templating, some factors to take into account are:</p>

<ul>
  <li>A screen is composed of different sections viz. some are static and some have to be periodically refreshed from the server.</li>
  <li>Different sections refresh at different rates : ex. an activity feed refreshes much faster than your main timeline.</li>
  <li>The same data (models) may have different presentations at the same time, for example, fresher news stories may be rendered in a more attention grabbing manner as compared to older ones.</li>
  <li>Your server is simply a <a href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST interface</a> and not a full fledged web-server or you are interfacing with someone else’s APIs (ex twitter et al)</li>
</ul>

<p>In most of the above scenarios, it is not going to be advisable to generate HTML on the server (and in some cases, its going to be impossible to do so) and serve it to the client. This is where client side templating steps in.</p>

<h2 id="what-is-client-side-templating">What is Client-Side Templating?</h2>

<p>As the name suggests, client side templating means evaluating templates in the browser (via Javascript) as opposed to evaluating them on the server. There are plenty of templating engines out there, both traditional and logic-less flavors.</p>

<h3 id="traditional-non-logic-less-templates">Traditional (Non Logic Less Templates)</h3>

<p>These templates allow the programmer to mix in a ton of logic, be it presentation logic or business logic, into the template. A simple example is the underscore templating engine, available with the popular (and awesome!) <a href="http://underscorejs.org/">underscore.js</a> library.</p>

<p>Consider an example (using underscore’s template engine) wherein you have to display the current day (which can be computed programmatically) and the current user’s name (which will have to be provided to the template externally):</p>

<p><em>HTML</em></p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">id=</span><span class="s">&quot;tmplCurrentDay&quot;</span> <span class="na">type=</span><span class="s">&quot;text/x-template&quot;</span><span class="nt">&gt;</span>
  <span class="o">&lt;%</span> <span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sunday&#39;</span><span class="p">,</span> <span class="s1">&#39;Monday&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Wednesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Thursday&#39;</span><span class="p">,</span> <span class="s1">&#39;Friday&#39;</span><span class="p">,</span> <span class="s1">&#39;Saturday&#39;</span><span class="p">];</span> <span class="o">%&gt;</span>
  <span class="o">&lt;%</span> <span class="kd">var</span> <span class="nx">currentDay</span> <span class="o">=</span> <span class="nx">days</span><span class="p">[(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getDay</span><span class="p">()];</span> <span class="o">%&gt;</span>
  <span class="nx">Hello</span> <span class="o">&lt;%=</span> <span class="nx">name</span> <span class="o">%&gt;</span><span class="p">,</span> <span class="nx">today</span> <span class="nx">is</span> <span class="o">&lt;%=</span> <span class="nx">currentDay</span> <span class="o">%&gt;!</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

<p><em>JavaScript</em></p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;tmplCurrentDay&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">template</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">}).</span><span class="nx">trim</span><span class="p">();</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span></code></pre></div>

<p>As you can see, we have js logic embedded right in the template. In a situation like this, it might work out to be in our favor but more often than not, templates are much larger and turn out to be a mess of logic ( in javascript ) and template code ( pseudo html ).</p>

<h3 id="logic-less-templates">Logic Less Templates</h3>

<p>Logic less templates, as the name suggests, do not support arbitrary code evaluation in them. In most cases they only allow <code>if</code> statements and <code>for</code> loops. Some allow for evaluating external functions and there are others still that allow registering helper methods with the templating engine itself that are globally accessible from any template (imagine a globally available <code>currentUser()</code> function which when evaluated returns the current user’s name).</p>

<p>Let’s take up the same example, but with Mustache this time.</p>

<p><em>HTML</em></p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">id=</span><span class="s">&quot;tmplCurrentDay&quot;</span> <span class="na">type=</span><span class="s">&quot;text/x-template&quot;</span><span class="nt">&gt;</span>
  <span class="o">&lt;%</span> <span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sunday&#39;</span><span class="p">,</span> <span class="s1">&#39;Monday&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Wednesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Thursday&#39;</span><span class="p">,</span> <span class="s1">&#39;Friday&#39;</span><span class="p">,</span> <span class="s1">&#39;Saturday&#39;</span><span class="p">];</span> <span class="o">%&gt;</span>
  <span class="o">&lt;%</span> <span class="kd">var</span> <span class="nx">currentDay</span> <span class="o">=</span> <span class="nx">days</span><span class="p">[(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getDay</span><span class="p">()];</span> <span class="o">%&gt;</span>
  <span class="nx">Hello</span> <span class="o">&lt;%=</span> <span class="nx">name</span> <span class="o">%&gt;</span><span class="p">,</span> <span class="nx">today</span> <span class="nx">is</span> <span class="o">&lt;%=</span> <span class="nx">currentDay</span> <span class="o">%&gt;!</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

<p><em>JavaScript</em></p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;tmplCurrentDay&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Biswarup&#39;</span><span class="p">,</span>
  <span class="nx">currentDay</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sunday&#39;</span><span class="p">,</span> <span class="s1">&#39;Monday&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Wednesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Thursday&#39;</span><span class="p">,</span> <span class="s1">&#39;Friday&#39;</span><span class="p">,</span> <span class="s1">&#39;Saturday&#39;</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">days</span><span class="p">[(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getDay</span><span class="p">()];</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">Mustache</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">template</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span></code></pre></div>

<p>Notice the ridiculously clean separation between presentation and data? It might look like overkill for something this small, but imagine a much bigger view (maybe a dashboard?). The spagetti of business logic code and UI code in the same file gets to be an absolute nightmare very, very fast. That is where logic-less templates shine.</p>

<h2 id="features-or-stuff-you-may-want-to-make-a-note-of">Features (or stuff you may want to make a note of)</h2>

<h3 id="precompilation">Precompilation</h3>

<p>In most modern templating engines, the template is first precompiled into a function when it’s initialized or when it’s evaluated for the first time. Subsequent calls can skip the parsing and tokenization stages and are evaluated much quicker.</p>

<p>Another advantage that comes from this is that the precompilation step can actually be performed on the server itself. This significantly speeds up the rendering on the client. <a href="http://handlebarsjs.com/">Handlebars</a> on Node.js and <a href="http://twitter.github.io/hogan.js/">Hogan.js</a> are examples of popular templating engines that precompile client templates on the server.</p>

<h3 id="html-escaping">HTML Escaping</h3>

<p>Since the most common use-case of templates is to generate client side HTML (well, duh!), most have inbuilt methods to escape HTML before evaluation is completed. Conventionally they are differentiated based on the escape sequence used, ex. underscore uses <code>&lt;%=</code> for unescaped and <code>&lt;%-</code> for HTML escaped, and Mustache uses <code>{{</code> for escaped and <code>{{{</code> for the raw, unescaped form.</p>

<h3 id="partials">Partials</h3>

<p>If you’re thinking of building out a larger application, you might want a template to inherit another one; or you may want a larger template to be composed of smaller templates. In the templating world, the smaller templates are called <em>partials</em>. Many libraries have good support for partials, including <a href="http://akdubya.github.io/dustjs/">dustjs</a> and Mustache.js.</p>

<h3 id="scoping-amp-context">Scoping &amp; Context</h3>

<p>If your data models are going to be large objects with deep structure, then it may be in your favor to check out how the templating engine provides scope and what is the context in which the template is evaluated. ex., most templating engines will walk up the object chain in order to find the required property and only return an empty string if it doesn’t find the required property in any of the parent objects.</p>

<p>Consider the model:</p>

<p><em>JavaScript</em></p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Biswarup&quot;</span><span class="p">,</span>
  <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
  <span class="s2">&quot;addresses&quot;</span><span class="o">:</span> <span class="p">[{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>
    <span class="s2">&quot;line1&quot;</span><span class="o">:</span> <span class="s2">&quot;[[ snip ]]&quot;</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Office&quot;</span><span class="p">,</span>
    <span class="s2">&quot;line1&quot;</span><span class="o">:</span> <span class="s2">&quot;[[ snip ]]&quot;</span>
  <span class="p">}]</span>
<span class="p">}</span></code></pre></div>

<p>If you’re iterating inside the <code>addresses</code> property and are rendering all the addresses, then the second object’s <code>name</code> <strong>will</strong> show up as <code>'Biswarup'</code> (and not an empty string). Now this may or may not be a good thing, but you need to be aware of this before you’ve made your choice.</p>

<h3 id="blocks-inline-partials">Blocks (Inline Partials)</h3>

<p>Blocks are a powerful (and I personally find them very useful) feature of certain template libraries like <a href="http://jade-lang.com/">Jade</a>. If you’re familiar with Ruby on Rails, imagine blocks to be somewhat similar to <code>content_for</code> blocks, but they can be overriden <strong>or</strong> appended/prepended to by any other partials that reference the template. They’re very useful on the server. OOTH, for client side templates, not having blocks is generally not a blocker.</p>

<h3 id="comments">Comments</h3>

<p>Comments are also supported by most templating libraries and most of them strip out the comments from the output while evaluation. Some support only single line comments while others support multi-line comments as well.</p>

<h3 id="remote-loading">Remote Loading</h3>

<p>Certain libraries (ex., Dust) support remote loading of templates from the server, without the programmer explicitly having to write the boilerplate to fire off an AJAX call, validate the response and precompile and register the template. Again, this is something that is more of a nice-to-have and generally not really a must-have.</p>

<h2 id="conclusion-8211-making-the-decision">Conclusion – Making the Decision</h2>

<p>In my experience, non logic less templates may seen more enticing (they’re easier to prototype with) but I’ve generally gravitated towards the logic less templates (primarily Mustache). More than your choice of templating engine, it’ll be the practices you follow that will determine whether going with client side templating turns out to be a win for you or not.</p>

<p><small>Note: if you (or your teammates) are not comfortable with client side templating in general or have just transitioned from, say, JSPs or ASPX, then I suggest you pick logic-less templates. It becomes mighty easy to shoot oneself in the foot with a more powerful engine.</small></p>

<p>Coming Soon: Best Practices with Client Side Templates</p>

  </section>
</article>

<footer class="post-footer">
  
  <section class="author">
    <h4></h4>
    <p></p>
  </section>
  

  <section class="comments">
    <div id="disqus_thread"></div>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </section>
</footer>
      </div>

    </div>
    <!-- <script type="text/javascript" src="/assets/javascripts/common/md5.js"></script> -->
    <!-- <script type="text/javascript" src="/assets/javascripts/common/init.js"></script> -->

    <!-- <script type="text/javascript" src="/assets/javascripts/common/socialite.min.js"></script> -->

    <script type="text/javascript" src="/assets/javascripts/common/common_all.js"></script>
  </body>
</html>
